(function(e){function t(t){for(var r,a,s=t[0],c=t[1],i=t[2],l=0,p=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(p.length)p.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(r=!1)}r&&(u.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o={app:0},u=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-02575c56":"3e37c976","chunk-57b22878":"31ad61e2","chunk-71752c5b":"5d570cde"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-02575c56":1,"chunk-57b22878":1,"chunk-71752c5b":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-02575c56":"ac1c8194","chunk-57b22878":"c1de97be","chunk-71752c5b":"cc5895d9"}[e]+".css",o=c.p+r,u=document.getElementsByTagName("link"),s=0;s<u.length;s++){var i=u[s],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){i=p[s],l=i.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],f.parentNode.removeChild(f),n(u)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=u);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var p=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var p=0;p<i.length;p++)t(i[p]);var f=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0c6d":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return h}));var r=n("1da1"),a=(n("4e82"),n("96cf"),n("bc3a")),o=n.n(a),u=n("5530"),s=(n("caad"),n("2532"),n("d3b7"),n("4360")),c=n("ef12"),i=o.a.create();i.defaults.baseURL="https://mallapi.duyiedu.com/goods/",i.interceptors.request.use((function(e){return e.url.includes("/passport")?e:Object(u["a"])(Object(u["a"])({},e),{},{params:Object(u["a"])(Object(u["a"])({},e.params),{},{appkey:s["a"].state.userInfo.appkey})})}),(function(e){Promise.project(e)})),i.interceptors.response.use((function(e){var t=e.data;return"success"===t.status&&"登陆成功"===t.msg&&Object(c["c"])(t.data),t}));var l=i;function p(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.get("/getsidebar",{params:{type:t}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.get("/getGoodsList",{params:{type:t.type,page:t.page||1,size:t.size||10,sort:t.sort||"all"}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(e,t){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("https://mallapi.duyiedu.com/passport/login",{email:t,password:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"14dc":function(e,t,n){"use strict";n("22c6")},"19a9":function(e,t,n){},"22c6":function(e,t,n){},2395:function(e,t,n){},4360:function(e,t,n){"use strict";var r=n("5530"),a=n("2b0e"),o=n("2f62"),u=n("ef12");a["a"].use(o["a"]),t["a"]=new o["a"].Store({state:{userInfo:Object(u["b"])(),shoppingNum:0,shoppingList:{},sumMoney:0},mutations:{startList:function(e){e.shoppingList=Object(r["a"])({},JSON.parse(localStorage.getItem("list")))},addMoney:function(e,t){e.sumMoney+=t},popMoney:function(e,t){e.sumMoney-=t},resetMoney:function(e){e.sumMoney=0},add:function(e,t){e.shoppingNum+=t||1},pop:function(e){e.shoppingNum-1<0||(e.shoppingNum-=1)},addList:function(e,t){a["a"].set(e.shoppingList,"".concat(t),"".concat(t))},removeList:function(e,t){a["a"].delete(e.shoppingList,t)},userSetCookie:function(e,t){e.userInfo=t},userDelCookie:function(e,t){e.userInfo=t}},actions:{setUserInfo:function(e,t){var n=e.commit;n("userSetCookie",t),Object(u["c"])(t)},delUserInfo:function(e){var t=e.commit;t("userDelCookie",Object(u["a"])())}},modules:{}})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("b970"),o=(n("499a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("BottomBar",{directives:[{name:"show",rawName:"v-show",value:e.flag,expression:"flag"}]})],1)}),u=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bottom-bar"},[n("van-tabbar",{attrs:{fixed:"",route:""}},e._l(e.list,(function(t,r){return n("van-tabbar-item",{key:r,attrs:{to:t.router,icon:t.icon,badge:"购物车"===t.name?e.num:""}},[e._v(e._s(t.name))])})),1)],1)},c=[],i={data:function(){return{num:0,list:[{name:"首页",icon:"home-o",badge:"",router:"/"},{name:"分类",icon:"apps-o",badge:"",router:"/Classify"},{name:"购物车",icon:"cart-o",badge:"",router:"/ShoppingCar"},{name:"我的",icon:"user-circle-o",badge:"",router:"/MyInfo"}]}},created:function(){console.log(localStorage.getItem("sum")),1*localStorage.getItem("sum")!==0&&(this.$store.commit("add",1*localStorage.getItem("sum")),this.refresh())},mounted:function(){this.$bus.$on("handelRefresh",this.refresh)},computed:{},methods:{refresh:function(){this.num=localStorage.getItem("sum")}}},l=i,p=n("2877"),f=Object(p["a"])(l,s,c,!1,null,null,null),d=f.exports,m=n("4360"),h={data:function(){return{}},computed:{flag:function(){return m["a"].state.userInfo.appkey}},components:{BottomBar:d}},b=h,g=(n("7c55"),Object(p["a"])(b,o,u,!1,null,null,null)),v=g.exports,y=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),w=n("bb51"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"email",label:"邮箱",placeholder:"邮箱",rules:[{required:!0,message:"请填写邮箱"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1)],1)},j=[],O=n("1da1"),x=(n("96cf"),n("0c6d")),_={data:function(){return{username:"",password:""}},methods:{onSubmit:function(e){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(x["c"])(e.email,e.password).then((function(e){return e.data}));case 2:r=n.sent,"success"===r.status&&t.$store.dispatch("setUserInfo",r.data).then((function(){t.$router.push("/Classify")}),(function(e){Promise.reject(e)}));case 4:case"end":return n.stop()}}),n)})))()}}},S=_,C=(n("fe76"),Object(p["a"])(S,k,j,!1,null,"6e4f29d0",null)),I=C.exports;r["a"].use(y["a"]);var L=[{path:"/",name:"Home",component:w["default"]},{path:"/Classify",name:"Classify",component:function(){return n.e("chunk-57b22878").then(n.bind(null,"0929"))}},{path:"/ShoppingCar",name:"ShoppingCar",component:function(){return n.e("chunk-02575c56").then(n.bind(null,"310c"))}},{path:"/MyInfo",name:"MyInfo",component:function(){return n.e("chunk-71752c5b").then(n.bind(null,"4b7f"))}},{path:"/Login",name:"Login",component:I}],E=new y["a"]({mode:"history",base:"/",routes:L});E.beforeEach((function(e,t,n){"/Login"===e.path||m["a"].state.userInfo.appkey?n():(alert("请先登陆"),n("/Login"))}));var M=E;n("157a");r["a"].prototype.$bus=new r["a"]({}),r["a"].use(a["a"]),r["a"].config.productionTip=!1,new r["a"]({router:M,store:m["a"],render:function(e){return e(v)}}).$mount("#app")},"7ad4":function(e,t,n){"use strict";var r=n("9cae"),a=n.n(r);t["default"]=a.a},"7c55":function(e,t,n){"use strict";n("2395")},"9cae":function(e,t){},bb51:function(e,t,n){"use strict";var r=n("bb7b"),a=n("7ad4"),o=(n("14dc"),n("2877")),u=Object(o["a"])(a["default"],r["a"],r["b"],!1,null,"3603847c",null);t["default"]=u.exports},bb7b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),r("h1",[e._v("每日优鲜首页")])])}]},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},ef12:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));n("4fad");var r=n("a78e"),a=n.n(r);function o(e){for(var t=Object.entries(e),n=0;n<t.length;n+=1)a.a.set(t[n][0],t[n][1]);return e}function u(){return{username:a.a.get("username"),appkey:a.a.get("appkey"),role:a.a.get("role"),email:a.a.get("email")}}function s(){return{username:a.a.remove("username"),appkey:a.a.remove("appkey"),role:a.a.remove("role"),email:a.a.remove("email")}}},fe76:function(e,t,n){"use strict";n("19a9")}});
//# sourceMappingURL=app.8295adef.js.map